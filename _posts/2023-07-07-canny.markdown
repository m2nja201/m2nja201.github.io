---
layout: post
title:  "[openCV] Canny Edge Detection"
date:   2023-07-07 20:07:36 +09:00
categories: ComputerVision openCV
---

**Canny Edge Detection**ì´ ë¬´ì—‡ì¸ì§€, ê·¸ì— ëŒ€í•œ Edge ê²€ì¶œ ë‹¨ê³„, ``Canny`` í•¨ìˆ˜ëŠ” ì–´ë–»ê²Œ í™œìš©í•˜ëŠ”ì§€ì— ëŒ€í•œ ë‚´ìš©ì„ í¬í•¨í•˜ê³  ìˆìŠµë‹ˆë‹¤.

<hr>
<br>

## ğŸŒ³ Canny Edge Detectionì´ë€
ì¸ê¸° ìˆëŠ” **Edge ê²€ì¶œ ì•Œê³ ë¦¬ì¦˜**ìœ¼ë¡œ ì¼ë°˜ Edge Detectionì—ì„œ ë‚˜íƒ€ëŠ” ë¶ˆë¶„ëª…í•œ Edgeë“¤ ì¤‘ **ì‹¤ì œ Edge**ë¥¼ ì°¾ì•„ ë¶„ëª…í•˜ê²Œ ë‚˜íƒ€ë‚´ëŠ” ì•Œê³ ë¦¬ì¦˜ì´ë‹¤.

<br>

## ğŸ‘€ Edge ê²€ì¶œ ë‹¨ê³„
Canny Edge Detectionì€ **ë‹¤ë‹¨ê³„ ì•Œê³ ë¦¬ì¦˜**ìœ¼ë¡œ êµ¬ì„±ë˜ì–´ ìˆê³ , ê·¸ ê³¼ì •ì€ ë‹¤ìŒê³¼ ê°™ë‹¤.
![](https://velog.velcdn.com/images/m2nja201/post/fc91060d-920a-4b38-b5c7-76f4f3d50b1c/image.png)

<br>
### ğŸ’¡ 1. Gaussian Filterë¥¼ í†µí•œ Smoothing (ë…¸ì´ì¦ˆ ì œê±°)

> #### ğŸ” Image Gradient (ì´ë¯¸ì§€ ê·¸ë¼ë””ì–¸íŠ¸)
**Gradient**ëŠ” ê¸°ìš¸ê¸° ë° ë³€í™”í•˜ëŠ” ì •ë„ë¥¼ ì˜ë¯¸í•˜ê¸° ë•Œë¬¸ì—, **Image Gradient**ëŠ” ê°€ì¥ í¬ê²Œ ë³€í™”í•˜ëŠ” í”½ì…€ì¸ **Edge**ë¥¼ ì˜ë¯¸í•œë‹¤.
ì¦‰, **ì´ë¯¸ì§€ì˜ Edge ê²€ì¶œ**ì— ì‚¬ìš©ë˜ê³  ì‹ì€ ë‹¤ìŒê³¼ ê°™ë‹¤.
![](https://velog.velcdn.com/images/m2nja201/post/fea7d6c8-cd00-4c3d-9899-929539f7e281/image.png)


Gradientë¥¼ í•  ë•Œ ì‹ í˜¸ë¥¼ **ë¯¸ë¶„**í•˜ê²Œ ë˜ëŠ”ë°, ì´ë•Œ ì‹ í˜¸ì™€ ë”ë¶ˆì–´ **Noise**ë„ í•¨ê»˜ **ê·¹ëŒ€í™”** ë  ê²ƒì´ë‹¤.
![](https://velog.velcdn.com/images/m2nja201/post/f24a5887-c003-4997-ae7d-eaf1eb914322/image.png)

ê·¸ë ‡ê¸° ë•Œë¬¸ì— **ë…¸ì´ì¦ˆë¥¼ ì—†ì• ì£¼ëŠ” ì‘ì—…**ì„ í•´ì•¼í•˜ê³ , ì´ë•Œ **Gaussian Filter**ë¥¼ ì‚¬ìš©í•œë‹¤.

[ê°€ìš°ì‹œì•ˆ í•„í„°ê°€ ê¶ê¸ˆí•˜ë‹¤ë©´ í´ë¦­ ğŸŒ¼](https://m2nja201.github.io/computervision/opencv/2023/07/07/gaussian-filter.html)


<br>

### ğŸ’¡ 2. Sobel Edge Detection
ë…¸ì´ì¦ˆê°€ ì œê±°ëœ ì´ë¯¸ì§€ì—ì„œ **Sobel Edge Detection**ì„ í†µí•´ ìˆ˜í‰ ë°©í–¥, ìˆ˜ì§ ë°©í–¥ì˜ **Edge**ë¥¼ ê²€ì¶œí•œë‹¤.

[Sobel í•„í„°ê°€ ê¶ê¸ˆí•˜ë‹¤ë©´ í´ë¦­ ğŸŒ¼](https://m2nja201.github.io/computervision/opencv/2023/07/07/sobel-filter.html)


<br>

### ğŸ’¡ 3. Non-maximum Suppression (Thinning) 
ê·¸ í›„ **ì„ ì„ ë³´ë‹¤ ëª…í™•í•˜ê³  ì–‡ê²Œ** ë‚˜íƒ€ë‚´ê¸° ìœ„í•´ **ë°©í–¥ìœ¼ë¡œ ìµœëŒ“ê°’ì„ ê°–ëŠ” í”½ì…€ë§Œ ë‚¨ê²¨ë‘ê³  ë‚˜ë¨¸ì§€ ê°’ì€ 0ìœ¼ë¡œ ë°”ê¾¸ëŠ”** ê³¼ì •ì„ ê±°ì¹œë‹¤.
![](https://velog.velcdn.com/images/m2nja201/post/d278a0ae-a362-40b3-9867-073c491b4153/image.png)

ìœ„ì™€ ê°™ì€ ì‚¬ì§„ì—ì„œ **q > p, r** ì´ë©´ ë‹¤ìŒ ë‹¨ê³„ë¡œ ë„˜ì–´ê°€ê³ , ê·¸ë ‡ì§€ ì•Šë‹¤ë©´ qì˜ í”½ì…€ ê°’ì„ 0ìœ¼ë¡œ ë°”ê¾¼ë‹¤ëŠ” ê²ƒì´ë‹¤.


<br>

### ğŸ’¡ 4. Hysteresis Thresholding
**Thresholding ê°’ Ï„**ë¥¼ ê¸°ì¤€ìœ¼ë¡œ **Ï„ë³´ë‹¤ ë†’ì€ ê°’ì„ ê°–ëŠ” tì— í•´ë‹¹ë˜ëŠ” ë¶€ë¶„**ì„ **Edge**ë¡œ ì§€ì •í•œë‹¤.
![](https://velog.velcdn.com/images/m2nja201/post/038143b9-73de-4161-8367-c7a33cf9ed16/image.png)
**(ê°€)**ëŠ” **high threshold**ë³´ë‹¤ ë†’ê¸° ë•Œë¬¸ì— **ë¶„ëª…í•œ Edge**ê°€ ë§ê³ ,
**(ë‚˜)**ëŠ” **high threshold**ë³´ë‹¨ ë‚®ì§€ë§Œ **ë¶„ëª…í•œ Edgeì¸ (ê°€)ì™€ ì—°ê²°ë˜ì–´** ìˆìœ¼ë¯€ë¡œ **Edge**ê°€ ë§ë‹¤.
**(ë‹¤)**ëŠ” high thresholdë³´ë‹¤ ë‚®ê¸° ë•Œë¬¸ì— **Edgeê°€ ì•„ë‹ˆë‹¤**


<br>

## ğŸª„ Canny í•¨ìˆ˜ì™€ ì‚¬ìš© (C++)
```cpp
void Canny(
	const CvArr* src, CvArr* dest, 
    double low_threshold, double high_threshold, 
    int aperture_size=3
    )

```
- ``apreture_size``ëŠ” kernelì˜ í¬ê¸°ë¥¼ ì˜ë¯¸í•œë‹¤.


<br>

### ì‚¬ìš© ì½”ë“œ
``` cpp
// Canny Edge Detection
	Mat example = imread("duck.jpg");
	resize(example, example, Size(500, 300));

	Mat canny[3];
	Canny(example, canny[0], 50, 130);
	Canny(example, canny[1], 150, 250);
	Canny(example, canny[2], 260, 310);
	for (int i = 0; i < 3; i++) {
		imshow("Edge Detection " + to_string(i), canny[i]);
		waitKey(0);
	}
```
``canny[3]``ë¼ëŠ” ë°°ì—´ì— ê°ê° ë‹¤ë¥¸ threshold ê°’ìœ¼ë¡œ ì›ë³¸ ì´ë¯¸ì§€ë¥¼ canny edge detection í•´ì£¼ì–´ ì €ì¥í–ˆë‹¤.

<br>

![](https://velog.velcdn.com/images/m2nja201/post/f45712b4-a004-4aa1-9645-42b43e6ee459/image.png)

- **ì„ê³„ê°’(low_th, high_th)**ê°€ **``(50, 130)``**ì²˜ëŸ¼ ë„ˆë¬´ ë‚®ì€ ê²½ìš°, ë¶ˆí•„ìš”í•œ (ë¶ˆë¶„ëª…í•œ) Edgeë“¤ì´ **ë„ˆë¬´ ë§ì´** ìƒê¸°ëŠ” ê²ƒì„ ë³¼ ìˆ˜ ìˆë‹¤.
- **``(150, 250)``**ì²˜ëŸ¼ ì ë‹¹í•œ ê²½ìš°, ì˜¤ë¦¬ì˜ ì”í„¸ì„ ê²½ê³„ë¡œ Edgeë¥¼ ë¹„êµì  ì •í™•í•˜ê²Œ ì°¾ì•„ë‚¸ ê²ƒì„ ë³¼ ìˆ˜ ìˆë‹¤.
- **``(260, 310)``**ì²˜ëŸ¼ ë„ˆë¬´ ë†’ì€ ê²½ìš°, í•„ìš”í•œ Edgeì˜ ì •ë³´ê¹Œì§€ **ì†ì‹¤**ë  ìˆ˜ ìˆë‹¤.
